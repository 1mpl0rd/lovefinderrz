"use strict";(self.webpackChunkmain_app=self.webpackChunkmain_app||[]).push([[390],{55:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(848),r=n(588),o=n(540);const i=({imageSrc:e,onFlipEnd:t,width:n=150,height:i=150,disabled:l=!1})=>{const s=(0,o.useRef)(null),[d,c]=(0,o.useState)(!1),[u,p]=(0,o.useState)(0),m=(0,o.useRef)(null),g=(0,o.useRef)({startTime:0,duration:2500,startFrame:0,targetFrame:0,totalFramesToPlay:0,reqId:0});(0,o.useEffect)(()=>{const t=new Image;t.src=e,t.onload=()=>{m.current=t,f(0)}},[e]);const f=e=>{const t=s.current,a=null==t?void 0:t.getContext("2d"),r=m.current;if(!t||!a||!r)return;a.clearRect(0,0,n,i);const o=r.height/18,l=e*o;a.drawImage(r,0,l,r.width,o,0,0,n,i)},h=e=>{const n=g.current;n.startTime||(n.startTime=e);const a=e-n.startTime,r=Math.min(a/n.duration,1),o=Math.floor(r*n.totalFramesToPlay),i=(n.startFrame+o)%18;f(i),r<1?n.reqId=requestAnimationFrame(h):(c(!1),f(n.targetFrame),p(n.targetFrame),t&&t(0===n.targetFrame?"HEADS":"TAILS"))},x=()=>{if(d||!m.current||l)return;c(!0);const e=Math.random()>.5?0:9,t=Math.floor(3*Math.random());let n=e-u;n<0&&(n+=18);const a=18*(5+t)+n;g.current={startTime:0,duration:2e3+1e3*Math.random(),startFrame:u,targetFrame:e,totalFramesToPlay:a,reqId:0},g.current.reqId=requestAnimationFrame(h)};return(0,a.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("canvas",{ref:s,width:n,height:i,className:l?"":"cursor-pointer",onClick:x,"aria-label":d?"Flipping...":"Flip the coin",role:"button",tabIndex:0})}),(0,a.jsx)(r.$n,{onClick:x,disabled:d||l,children:d?"Flipping...":"Flip"})]})};var l=n(418),s=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((a=a.apply(e,t||[])).next())})};const d=({timeLeft:e,onSubmit:t,onCancel:n})=>{const[i,l]=(0,o.useState)(""),[d,c]=(0,o.useState)(""),[u,p]=(0,o.useState)(""),[m,g]=(0,o.useState)(""),[f,h]=(0,o.useState)(!1),x=i&&d&&u;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(r.A_,{label:"Ort",value:i,onChange:l,placeholder:"Wo soll das Date stattfinden?",requiredIndicator:!0,disabled:f}),(0,a.jsx)(r.A_,{label:"Datum",type:"date",value:d,onChange:c,requiredIndicator:!0,disabled:f}),(0,a.jsx)(r.A_,{label:"Zeit",type:"time",value:u,onChange:p,requiredIndicator:!0,disabled:f}),(0,a.jsx)(r.A_,{label:"Kommentar",multiline:!0,type:"text",value:m,onChange:g,disabled:f}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.$n,{variant:"tertiary",onClick:n,disabled:f,children:"Nein, Danke!"}),(0,a.jsxs)(r.$n,{variant:"primary",disabled:!x,onClick:()=>s(void 0,void 0,void 0,function*(){if(x&&!f){h(!0);try{yield t({type:"date",location:i,date:d,time:u,comment:m||""})}catch(e){h(!1)}}}),loading:f,children:["Anfragen (",(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=t%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})(e),")"]})]})]})};var c=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((a=a.apply(e,t||[])).next())})};const u=({timeLeft:e,onSubmit:t,onCancel:n})=>{const[i,l]=(0,o.useState)(""),[s,d]=(0,o.useState)(""),[u,p]=(0,o.useState)(""),[m,g]=(0,o.useState)(!1),f=i&&s;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(r.A_,{label:"Datum",type:"date",value:i,onChange:l,requiredIndicator:!0,disabled:m}),(0,a.jsx)(r.A_,{label:"Zeit",type:"time",value:s,onChange:d,requiredIndicator:!0,disabled:m}),(0,a.jsx)(r.A_,{label:"Kommentar",multiline:!0,type:"text",value:u,onChange:p,disabled:m}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.$n,{variant:"tertiary",onClick:n,disabled:m,children:"Nein, Danke!"}),(0,a.jsxs)(r.$n,{variant:"primary",disabled:!f,onClick:()=>c(void 0,void 0,void 0,function*(){if(f&&!m){g(!0);try{yield t({type:"call",date:i,time:s,comment:u||""})}catch(e){g(!1)}}}),loading:m,children:["Anfragen (",(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=t%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})(e),")"]})]})]})};var p=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((a=a.apply(e,t||[])).next())})};const m=({timeLeft:e,onSubmit:t,onCancel:n})=>{const[i,l]=(0,o.useState)(""),[s,d]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),m=i.trim().length>0;return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(r.A_,{label:"Inhalt",value:i,onChange:l,placeholder:"Was m√∂chtest du sehen?",multiline:!0,requiredIndicator:!0,disabled:c}),(0,a.jsx)(r.A_,{label:"Kommentar",multiline:!0,type:"text",value:s,onChange:d,disabled:c}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(r.$n,{variant:"tertiary",onClick:n,disabled:c,children:"Nein, Danke!"}),(0,a.jsxs)(r.$n,{variant:"primary",disabled:!m,onClick:()=>p(void 0,void 0,void 0,function*(){if(m&&!c){u(!0);try{yield t({type:"nudes",content:i,comment:s||""})}catch(e){u(!1)}}}),loading:c,children:["Anfragen (",(e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=t%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})(e),")"]})]})]})};var g=n(401),f=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((a=a.apply(e,t||[])).next())})};const h="service_p58omhs",x="template_ud7jaxq",v="8CaJH8NmOi5LFMOm1";function b(e){return f(this,void 0,void 0,function*(){try{const t=function(e){const t=(new Date).toLocaleString("de-DE",{dateStyle:"full",timeStyle:"short"});let n="";switch(e.type){case"date":n=`\n        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">\n          <h2 style="color: #495057; margin: 0 0 15px 0;">üìç Date Anfrage</h2>\n          <table style="width: 100%; border-collapse: collapse;">\n            <tr>\n              <td style="padding: 8px 0; color: #6c757d; width: 120px;"><strong>Ort:</strong></td>\n              <td style="padding: 8px 0; color: #212529;">${e.location}</td>\n            </tr>\n            <tr>\n              <td style="padding: 8px 0; color: #6c757d;"><strong>Datum:</strong></td>\n              <td style="padding: 8px 0; color: #212529;">${e.date}</td>\n            </tr>\n            <tr>\n              <td style="padding: 8px 0; color: #6c757d;"><strong>Uhrzeit:</strong></td>\n              <td style="padding: 8px 0; color: #212529;">${e.time}</td>\n            </tr>\n          </table>\n        </div>\n      `;break;case"call":n=`\n        <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">\n          <h2 style="color: #495057; margin: 0 0 15px 0;">üìû Anruf Buchung</h2>\n          <table style="width: 100%; border-collapse: collapse;">\n            <tr>\n              <td style="padding: 8px 0; color: #6c757d;"><strong>Datum:</strong></td>\n              <td style="padding: 8px 0; color: #212529;">${e.date}</td>\n            </tr>\n            <tr>\n              <td style="padding: 8px 0; color: #6c757d;"><strong>Uhrzeit:</strong></td>\n              <td style="padding: 8px 0; color: #212529;">${e.time}</td>\n            </tr>\n          </table>\n        </div>\n      `;break;case"nudes":n=`\n        <div style="background-color: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ffc107;">\n          <h2 style="color: #856404; margin: 0 0 15px 0;">üî• Nudes Request</h2>\n          <div style="color: #856404; line-height: 1.6;">\n            <strong>Gew√ºnschter Inhalt:</strong><br/>\n            <div style="margin-top: 10px; padding: 15px; background-color: white; border-radius: 4px;">\n              ${e.content}\n            </div>\n          </div>\n        </div>\n      `}return`\n    <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">\n      <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 12px 12px 0 0; text-align: center;">\n        <h1 style="color: white; margin: 0; font-size: 28px;">‚ú® Neue Anfrage</h1>\n      </div>\n      \n      <div style="background-color: white; padding: 30px; border: 1px solid #e9ecef; border-top: none; border-radius: 0 0 12px 12px;">\n        <p style="color: #495057; font-size: 16px; margin: 0 0 20px 0;">\n          Hey! Du hast eine neue Anfrage √ºber deine Website erhalten.\n        </p>\n        \n        ${n}\n        ${e.comment?`\n      <div style="margin: 20px 0; padding: 15px; background-color: #e7f3ff; border-radius: 8px; border-left: 4px solid #0d6efd;">\n        <strong style="color: #084298;">üí¨ Kommentar:</strong>\n        <div style="margin-top: 8px; color: #084298;">\n          ${e.comment}\n        </div>\n      </div>\n    `:""}\n        \n        <div style="margin-top: 30px; padding-top: 20px; border-top: 2px dashed #dee2e6; color: #6c757d; font-size: 13px;">\n          <strong>üìÖ Eingegangen am:</strong> ${t}\n        </div>\n      </div>\n      \n      <div style="text-align: center; margin-top: 20px; color: #6c757d; font-size: 12px;">\n        <p style="margin: 0;">Diese Email wurde automatisch generiert.</p>\n      </div>\n    </div>\n  `}(e),n={email_content:t,subject:"Neue "+("date"===e.type?"Date-Anfrage":"call"===e.type?"Anruf-Buchung":"Nudes-Request")};yield g.Ay.send(h,x,n,v)}catch(e){throw new Error("Email konnte nicht gesendet werden")}})}var y=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function i(e){try{s(a.next(e))}catch(e){o(e)}}function l(e){try{s(a.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}s((a=a.apply(e,t||[])).next())})};var S=({timeLeft:e,onMessageSent:t})=>{const{closePortalElement:n}=(0,r.ub)(),[i,s]=(0,o.useState)("date"),c=e=>y(void 0,void 0,void 0,function*(){try{yield b(e),null==t||t(),n("main-portal")}catch(e){}}),p=()=>{n("main-portal")};return(0,a.jsx)(r.hy,{id:"main-portal",transitionClassName:"fade-transition",closeOnOutsideClick:!1,hasCurtain:!0,children:(0,a.jsxs)("div",{className:"fixed inset-[5%] bg-[rgb(var(--bgColor-default))] m-auto max-w-[28rem] p-4 flex h-max flex-col gap-4 border border-[rgb(var(--borderColor-default))]",children:[(0,a.jsx)(r.dQ,{id:"request-popover",triggerType:"click",position:"bottom-start",children:(0,a.jsxs)("div",{className:"flex items-center w-max cursor-pointer",children:[(0,a.jsx)(r.EY,{as:"h3",variant:"headingLg",children:(()=>{switch(i){case"date":return"üìç Date";case"call":return"üìû Anruf";case"nudes":return"üî• Nudes"}})()}),(0,a.jsx)(r.In,{size:24,source:l.yQ})]})}),(0,a.jsx)(r.hy,{id:"request-popover",transitionClassName:"fade-transition",closeOnOutsideClick:!0,children:(0,a.jsx)("div",{className:"absolute mt-1 bg-[rgb(var(--bgColor-default))] whitespace-nowrap flex h-max flex-col gap-2 border border-[rgb(var(--borderColor-default))]",children:(0,a.jsxs)("ul",{className:"flex h-max flex-col",children:[(0,a.jsx)("li",{className:"p-2 "+("date"===i?"cursor-default bg-[rgb(var(--bgColor-fill-button))]":"cursor-pointer"),onClick:()=>{s("date"),n("request-popover")},children:"üìç Date"}),(0,a.jsx)("li",{className:"p-2 "+("call"===i?"cursor-default bg-[rgb(var(--bgColor-fill-button))]":"cursor-pointer"),onClick:()=>{s("call"),n("request-popover")},children:"üìû Anruf"}),(0,a.jsxs)("li",{className:"p-2 "+("nudes"===i?"cursor-default bg-[rgb(var(--bgColor-fill-button))]":"cursor-pointer"),onClick:()=>{s("nudes"),n("request-popover")},children:["üî• Nudes ",(0,a.jsx)(r.Ex,{tone:"info",children:"Beta"})]})]})})}),"date"===i&&(0,a.jsx)(d,{timeLeft:e,onSubmit:c,onCancel:p}),"call"===i&&(0,a.jsx)(u,{timeLeft:e,onSubmit:c,onCancel:p}),"nudes"===i&&(0,a.jsx)(m,{timeLeft:e,onSubmit:c,onCancel:p})]})})},w=n.p+"images/coin_sheet.png",j=n(788);var C=()=>{const[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)(()=>{const e=localStorage.getItem("flipAttempts");return e?parseInt(e,10):0}),[s,d]=(0,o.useState)(()=>{const e=localStorage.getItem("cooldownEnd");return e?parseInt(e,10):null}),[c,u]=(0,o.useState)(0),[p,m]=(0,o.useState)(!1),[g,f]=(0,o.useState)(()=>{const e=localStorage.getItem("winCooldownEnd");return e?parseInt(e,10):null}),[h,x]=(0,o.useState)(0),[v,b]=(0,o.useState)(()=>{const e=localStorage.getItem("winCooldownEnd");return!!e&&parseInt(e,10)>Date.now()});(0,o.useEffect)(()=>{if(!s)return;const e=setInterval(()=>{const e=s-Date.now();u(e),e<=0&&(l(0),localStorage.removeItem("flipAttempts"),d(null),localStorage.removeItem("cooldownEnd"),u(0))},1e3);return()=>clearInterval(e)},[s]),(0,o.useEffect)(()=>{if(!g)return;const e=setInterval(()=>{const t=g-Date.now();x(t),t<=0&&(b(!1),f(null),localStorage.removeItem("winCooldownEnd"),x(0),clearInterval(e))},1e3);return()=>clearInterval(e)},[g]);const y=2-n,C=y>0,I=e=>{const t=Math.floor(e/1e3),n=Math.floor(t/3600),a=Math.floor(t%3600/60),r=t%60;return`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`};return(0,a.jsxs)(a.Fragment,{children:[p&&(0,a.jsx)(j.A,{recycle:!1}),(0,a.jsxs)("div",{className:"relative flex flex-col items-center justify-center min-h-screen",children:[e&&(0,a.jsx)("div",{className:"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex items-center whitespace-nowrap gap-2",children:(0,a.jsx)(r.EY,{as:"p",variant:"bodyLg",fontWeight:"bold",children:"Danke, ich melde mich sofort! :)"})}),(0,a.jsx)("div",{className:"absolute bottom-4 right-4",children:(0,a.jsx)(r.dQ,{id:"main-portal",triggerType:"click",children:(0,a.jsxs)(r.$n,{variant:"primary",disabled:!v,children:["Portal √∂ffnen ",v&&`(${I(h)})`]})})}),(0,a.jsx)("div",{className:"absolute top-4 left-4",children:(0,a.jsx)(r.EY,{as:"span",variant:"bodySm",children:C?`Versuche: ${y}`:`N√§chster Versuch: ${I(c)}`})}),(0,a.jsx)(i,{imageSrc:w,onFlipEnd:e=>{const t=n+1;if(l(t),localStorage.setItem("flipAttempts",t.toString()),t>=2){const e=Date.now()+864e5;d(e),localStorage.setItem("cooldownEnd",e.toString())}if("HEADS"===e){const e=Date.now()+18e5;f(e),localStorage.setItem("winCooldownEnd",e.toString()),b(!0),m(!0),setTimeout(()=>m(!1),7e3)}},width:150,height:150,disabled:!C}),v&&(0,a.jsx)(S,{timeLeft:h,onMessageSent:()=>t(!0)})]})]})}}}]);